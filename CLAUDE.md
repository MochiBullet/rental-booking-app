# CLAUDE.md - プロジェクト管理ドキュメント

## プロジェクト概要
レンタルブッキングアプリ (GreenRide) - 車両レンタルサービスのWebアプリケーション

## 技術スタック
- **フロントエンド**: React.js, React Router
- **スタイリング**: CSS (Instagram風モダンデザイン)
- **デプロイ**: GitHub Actions → AWS S3
- **データ管理**: LocalStorage (現時点)

## 重要なアクセス情報

### 管理者画面へのアクセス
1. ロゴ（GR）を**10回クリック**
2. 管理者ログイン画面が表示される
3. ログイン情報:
   - Username: `admin`
   - Password: `admin123`

### デプロイ監視
- GitHub Actions: https://github.com/MochiBullet/rental-booking-app/actions
- S3バケット: rental-booking-app-bucket (ap-southeast-2)

## コマンドリファレンス

### ビルド & テスト
```bash
npm run build  # プロダクションビルド
npm start      # 開発サーバー起動
npm test       # テスト実行
```

### Git操作
```bash
git add -A
git commit -m "メッセージ"
git push origin master
```

## プロジェクト構造
```
src/
├── App.js                 # メインアプリケーション
├── App.css               # グローバルスタイル
└── components/
    ├── HomePage.js       # ホームページ
    ├── VehicleList.js    # 車両一覧
    ├── Login.js          # ユーザーログイン
    ├── Register.js       # ユーザー登録
    ├── AdminLogin.js     # 管理者ログイン
    └── AdminDashboard.js # 管理者ダッシュボード
```

## 実装済み機能
- [x] Instagram風モダンデザイン
- [x] ユーザー認証（ログイン/登録）
- [x] 車両一覧・予約機能
- [x] 管理者ダッシュボード
- [x] 予約管理
- [x] 車両管理（CRUD）
- [x] ユーザー管理
- [x] 売上分析

## 作業ログ & 振り返り

### 2024/08/06 - 管理者ページの大幅強化とサイト設計管理機能
**実施内容:**
- サイト全体デザインのリアルタイム変更システム
- 顧客一元管理システムの構築
- 車両管理機能の大幅強化
- 包括的なサイト設定管理

**主要新機能:**
1. **🎨 サイトデザイン管理システム**
   - カラーピッカーによるリアルタイム変更
   - 4つのプリセットテーマ（Green/Blue/Purple/Orange）
   - ライブプレビュー機能
   - CSS変数の動的更新・永続化

2. **👥 顧客一元管理システム**
   - 詳細顧客情報（氏名・電話・住所・免許証・ポイント）
   - VIP/Premium/Regular顧客ランク自動分類
   - 利用統計（回数・累計金額・保有ポイント）
   - 検索・フィルタ・エクスポート機能
   - 顧客アクション（詳細表示・編集・メッセージ送信）

3. **🚗 車両管理強化**
   - 車両タイプの正規化（'car'/'bike'）
   - 詳細編集・削除・可用性切替
   - 改善されたカード型UI

4. **⚙️ サイト設定管理**
   - 車両管理設定（デフォルト価格・在庫アラート）
   - ポイントシステム設定（還元率・新規ボーナス）
   - 分析・レポート設定
   - システム管理（リセット・バックアップ）

**技術的実装:**
- CSS変数の動的操作によるテーマ切替
- LocalStorage活用した設定永続化
- 複雑なデータ構造の効率的管理
- レスポンシブデザインの全面適用

**管理機能の使い方:**
1. 管理者ログイン → ロゴ10回クリック
2. Site Settings → デザイン変更
3. Users → 顧客管理・分析
4. Vehicles → 車両CRUD操作

**成果:**
- プロ仕様の管理システム完成
- サイト運営の完全自動化
- データドリブンな顧客管理実現

### 2024/08/06 - 新会員登録フローとマイページ機能実装
**実施内容:**
- メールアドレスのみの初期登録システム構築
- 詳細情報入力フォーム（4ステップ）作成
- 免許証情報・画像アップロード機能
- スマートフォンカメラ撮影機能
- 包括的なマイページ（概要・予約履歴・ポイント・プロフィール）
- ポイントシステム（利用金額5%還元・新規1,000pt）
- 予約完了時のポイント獲得表示

**新機能詳細:**
1. **2段階会員登録**
   - 初回：メールアドレスのみ入力
   - 詳細：個人情報・住所・免許証・アカウント設定
   
2. **免許証アップロード**
   - ファイル選択とカメラ撮影両対応
   - 表面・裏面の画像保存
   - リアルタイムプレビュー
   
3. **マイページ機能**
   - 今後の予約・利用履歴表示
   - ポイント残高・獲得履歴
   - プロフィール情報管理
   - 統計情報表示

4. **ポイントシステム**
   - 新規登録1,000ptボーナス
   - 利用金額の5%ポイント還元
   - 予約完了時の獲得表示
   - ポイント履歴管理

**技術的改善:**
- LocalStorageでの複雑なデータ管理
- 多段階フォーム検証システム
- レスポンシブ対応の充実
- カメラAPI活用

**成果:**
- ユーザーエクスペリエンス大幅向上
- 本格的なレンタルサービスの体裁確立
- 顧客囲い込みシステム完成

### 2024/08/06 - デザインテーマ統一と日本語化
**実施内容:**
- 全体のカラーテーマを緑色基調に統一
- CSS変数を緑色系(#43a047, #66bb6a, #81c784)に更新
- 車両リストページの完全日本語化
- ホームページのグラデーションを緑色系に変更
- App.cssのカラー変数を緑テーマに更新

**成果:**
- 統一感のあるモダンなデザインを実現
- ユーザビリティの向上（日本語表記で分かりやすく）
- ブランドカラーの確立（緑色 = エコフレンドリー）

**良かった点:**
- 迅速な対応で要望を実現
- 一貫性のあるデザインシステムの構築
- ビルドエラーなしで正常にデプロイ

### 2024/08/06 - 車両リスト修正と機能拡張
**実施内容:**
- 車両リストに実際の画像を追加（Unsplashから）
- 料金プラン機能（Daily/Weekly/Monthly/Purchase）
- 保険オプションのトグル機能
- リアルタイム料金計算
- 車10台、バイク10台のサンプルデータ追加

**問題と解決:**
1. **車両リストが表示されない問題**
   - 問題: typeが'Sedan'等になっていたが、ルーティングは'car'/'bike'
   - 解決: typeを'car'と'bike'に統一
   - 教訓: ルーティングとデータの整合性を確認

2. **デプロイ後の確認不足**
   - 反省: デプロイ後の動作確認を怠った
   - 改善: 今後は必ずデプロイ後に実際のサイトを確認

**良かった点:**
- モダンなUIでユーザー体験を向上
- リアルタイム計算で透明性のある料金表示
- 豊富な車両選択肢を提供

## 作業ログ & 振り返り

### 2024/12/XX - 初期セットアップ
**実施内容:**
- アプリケーションのクラッシュを修正
- 不足していたコンポーネントを作成
- GitHub Actions CI/CD パイプラインの設定

**反省点:**
- 最初にファイル構造全体を確認すべきだった
- コンポーネントの依存関係を事前に把握する必要があった

### 2024/12/XX - デザイン改善
**実施内容:**
- Instagram風のモダンなデザインに変更
- グラデーション、丸みのあるボタン、ホバーエフェクトを追加
- レスポンシブデザインの実装

**反省点:**
- CSSファイルのエンコーディング問題に遭遇
- 日本語テキストの扱いに注意が必要

### 2024/12/XX - 管理者機能実装
**実施内容:**
- 包括的な管理者ダッシュボードの作成
- 予約・車両・ユーザー管理機能
- 売上分析機能の追加

**問題と解決:**
1. **エンコーディング問題**
   - 問題: 日本語テキストが文字化けしてビルドエラー
   - 解決: 英語テキストに変更
   - 教訓: UTF-8エンコーディングを確実に設定する

2. **ロゴクリック機能**
   - 問題: 10回クリックしても反応しない
   - 解決: AdminLoginコンポーネントが空だった
   - 教訓: 機能実装時は関連コンポーネントすべてを確認

**良かった点:**
- TodoWriteツールで作業を整理できた
- 段階的に機能を実装できた
- エラーを素早く特定・修正できた

## 今後の改善点

### 技術的改善
1. **バックエンド実装**
   - 現在はLocalStorageのみ
   - APIサーバーの構築が必要
   - データベース連携

2. **セキュリティ強化**
   - 管理者認証の改善
   - JWTトークンの実装
   - HTTPS化

3. **テスト追加**
   - ユニットテスト
   - 統合テスト
   - E2Eテスト

### プロセス改善
1. **作業前の確認**
   - 全体構造の把握
   - 依存関係の確認
   - エンコーディング設定

2. **コミュニケーション**
   - エラー内容を正確に把握
   - ユーザーの要望を明確化
   - 進捗を定期的に報告

3. **ドキュメント化**
   - 実装内容の記録
   - 問題と解決策の記録
   - 学んだことの共有

## ベストプラクティス

### コード品質
- コンポーネントは単一責任の原則に従う
- 再利用可能なコンポーネントを作成
- 適切なエラーハンドリング

### Git運用
- 意味のあるコミットメッセージ
- 小さく頻繁なコミット
- ブランチ戦略の検討

### デプロイ
- CI/CDパイプラインの監視
- ビルドエラーの早期発見
- ステージング環境の活用

## 連絡先・リソース
- GitHub: https://github.com/MochiBullet/rental-booking-app
- AWS S3: rental-booking-app-bucket.s3-website-ap-southeast-2.amazonaws.com

---

*このドキュメントは継続的に更新されます。各作業後に振り返りと改善点を追記してください。*